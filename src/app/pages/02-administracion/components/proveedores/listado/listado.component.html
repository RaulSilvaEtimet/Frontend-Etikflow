<p-card header="Listado de proveedores">
    <p-table #dtData [value]="listProveedores" [tableStyle]="{'min-width': '50rem'}" [loading]="loadingProveedores"
        [paginator]="true" [rows]="10" styleClass="p-datatable-sm"
        [globalFilterFields]="['IdProveedor','RazonSocialProveedor','IdentificacionProveedor','DireccionProveedor','TipoCuenta']">
        <ng-template pTemplate="caption">
            <div class="flex">
                <div class="flex gap-3">
                    <p-button label="Agregar" severity="success" icon="fa-solid fa-plus"
                        (onClick)="onOpenModalCreate()"></p-button>
                    <p-button label="Sincronizar" icon="pi pi-sync" [loading]="loadingProveedores"
                        (onClick)="onGetAllProveedores()" />
                </div>
                <span class="p-input-icon-left ml-auto">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" [(ngModel)]="buscarProveedor" (input)="onGlobalFilter(dtData
                        , $event)" placeholder="Filtrar..." />
                </span>
            </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
            <tr>
                <th style="width: 7.5%">Acciones</th>
                <th pSortableColumn="IdProveedor">Id<p-sortIcon field="IdProveedor" /></th>
                <th pSortableColumn="RazonSocialProveedor">Razon Social<p-sortIcon field="IdentificacionCliente" />
                </th>
                <th pSortableColumn="IdentificacionProveedor">Identificación<p-sortIcon
                        field="IdentificacionProveedor" /></th>
                <th>Tipo Identificación</th>
                <th pSortableColumn="DireccionProveedor">Dirección<p-sortIcon field="DireccionProveedor" /></th>
                <th pSortableColumn="TipoCuenta">Tipo cuenta<p-sortIcon field="TipoCuenta" /></th>
                <th>Ubicación</th>
                <th pSortableColumn="PlazoPago">Plazo Pago<p-sortIcon field="PlazoPago" /></th>
                <th pSortableColumn="TipoPago">Tipo Pago<p-sortIcon field="TipoPago" /></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-proveedor let-columns="columns" let-rowIndex="rowIndex">
            <tr>
                <td class="flex gap-2 justify-content-center">
                    <p-button icon="fa-solid fa-pencil" [raised]="true" severity="primary" pTooltip="Editar"
                        tooltipPosition="bottom" (onClick)="onOpenModalEdit(proveedor)"></p-button>
                </td>
                <td>{{proveedor.IdProveedor}}</td>
                <td>{{proveedor.RazonSocialProveedor}}</td>
                <td>{{proveedor.IdentificacionProveedor}}</td>
                <td>
                    @switch (proveedor.TipoIdentificacionProveedor) {
                    @case ('P') {
                    {{'Pasaporte'}}
                    }
                    @case ('C') {
                    {{'Cédula'}}
                    }
                    @case ('R') {
                    {{'Ruc'}}
                    }
                    }
                </td>
                <td>{{proveedor.DireccionProveedor}}</td>
                <td>{{proveedor.TipoCuenta}}</td>
                <td>{{(proveedor.ProveedorNacional ? 'NACIONAL': 'INTERNACIONAL')}}</td>
                <td>{{proveedor.PlazoPago}}</td>
                <td>{{proveedor.TipoPago}}</td>
            </tr>
        </ng-template>
    </p-table>
</p-card>
<!--MODAL DE EDICION Y CREACION-->
<p-dialog [header]="headerModalProveedor ? 'Crear proveedor':'Editar proveedor'" [modal]="true"
    [(visible)]="modalProveedor" [style]="{ width: '50rem' }">
    <div class="mt-2">
        <form class="flex flex-column gap-3" [formGroup]="myForm" (ngSubmit)="onSaveOrEdit()">
            <div class="flex align-items-center gap-3">
                <label for="razonSocial" class="font-semibold w-7rem">Razon social</label>
                <input pInputText id="razonSocial" class="flex-auto" autocomplete="off" formControlName="razonSocial" />
            </div>
            <div class="flex align-items-center gap-3">
                <label for="identificacion" class="font-semibold w-7rem">Identificación</label>
                <input pInputText id="identificacion" class="flex-auto" autocomplete="off"
                    formControlName="identificacion" />
            </div>
            <div class="flex align-items-center gap-3">
                <label for="" class=" font-semibold w-7rem">Tipo identificación</label>
                <div class="flex flex-wrap gap-3 align-items-center">
                    <div class=" flex align-items-center">
                        <p-radioButton value="P" inputId="radiobtn1" formControlName="tipoIdentificacion" />
                        <label for="radiobtn1" class="ml-2">Pasaporte</label>
                    </div>
                    <div class="flex align-items-center">
                        <p-radioButton value="C" inputId="radiobtn2" formControlName="tipoIdentificacion" />
                        <label for="radiobtn2" class="ml-2">Cédula</label>
                    </div>
                    <div class="flex align-items-center">
                        <p-radioButton value="R" inputId="radiobtn3" formControlName="tipoIdentificacion" />
                        <label for="radiobtn3" class="ml-2">Ruc</label>
                    </div>
                </div>
            </div>
            <div class="flex align-items-center gap-3">
                <label for="direccion" class="font-semibold w-7rem">Dirección</label>
                <input pInputText id="direccion" class="flex-auto" autocomplete="off" formControlName="direccion" />
            </div>
            <div class="flex align-items-center gap-3">
                <label for="" class=" font-semibold w-7rem">Tipo cuenta</label>
                <div class="flex flex-wrap gap-3 align-items-center">
                    <div class=" flex align-items-center">
                        <p-radioButton value="CORRIENTE" inputId="radiobtn4" formControlName="tipoCuenta" />
                        <label for="radiobtn4" class="ml-2">CORRIENTE</label>
                    </div>
                    <div class="flex align-items-center">
                        <p-radioButton value="AHORROS" inputId="radiobtn5" formControlName="tipoCuenta" />
                        <label for="radiobtn5" class="ml-2">AHORROS</label>
                    </div>
                </div>
            </div>
            <div class="flex align-items-center gap-3">
                <label for="" class=" font-semibold w-7rem">Ubicacion</label>
                <div class="flex flex-wrap gap-3 align-items-center">
                    <div class=" flex align-items-center">
                        <p-radioButton value="1" inputId="radiobtn6" formControlName="ubicacion" />
                        <label for="radiobtn6" class="ml-2">NACIONAL</label>
                    </div>
                    <div class="flex align-items-center">
                        <p-radioButton value="0" inputId="radiobtn7" formControlName="ubicacion" />
                        <label for="radiobtn7" class="ml-2">INTERNACIONAL</label>
                    </div>
                </div>
            </div>
            <div class="flex align-items-center gap-3">
                <label for="plazoPago" class="font-semibold w-7rem">Plazo de pago</label>
                <p-inputNumber formControlName="plazoPago" id="plazoPago" [minFractionDigits]="0" mode="decimal"
                    styleClass="flex-auto" locale="en-US" [min]="0" />
            </div>
            <div class="flex align-items-center gap-3">
                <label for="" class=" font-semibold w-7rem">Tipo pago</label>
                <div class="flex flex-wrap gap-3 align-items-center">
                    <div class=" flex align-items-center">
                        <p-radioButton value="FP" inputId="radiobtn8" formControlName="tipoPlazo" />
                        <label for="radiobtn8" class="ml-2">Factura producida (FP)</label>
                    </div>
                    <div class="flex align-items-center">
                        <p-radioButton value="BL" inputId="radiobtn9" formControlName="tipoPlazo" />
                        <label for="radiobtn9" class="ml-2">Bill of Lading (BL)</label>
                    </div>
                </div>
            </div>
            <div class="flex justify-content-end gap-2">
                <p-button label="Guardar" severity="success" type="submit" />
                <p-button label="Cerrar" severity="secondary" (onClick)="modalProveedor = false" />
            </div>
        </form>
    </div>
</p-dialog>