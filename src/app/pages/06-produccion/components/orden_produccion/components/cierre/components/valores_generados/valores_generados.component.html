<p-table [value]="cierreService.listValoresProduccion" styleClass="p-datatable-sm" class="col-5">
    <ng-template pTemplate="header" let-columns>
        <tr>
            <th class="text-center">Acción</th>
            <th class="text-center">Fecha</th>
            <th class="text-center">Usuario</th>
            <th class="text-center">Maquina</th>
            <th class="text-center">Material</th>
            <th class="text-center">Ancho (mm)</th>
            <th class="text-center">Calibracion (m)</th>
            <th class="text-center">Metros producidos (m)</th>
            <th class="text-center">Area (m2)</th>
            <th class="text-center">Cantidad producida</th>
            <th class="text-center">Estado</th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item let-rowIndex="rowIndex">
        <tr>
            <td>
                <div class="flex gap-2">

                    <p-button icon="fa-solid fa-pencil" [raised]="true" severity="primary" pTooltip="Editar"
                        tooltipPosition="bottom" (onClick)="onOpenValores(item)"></p-button>
                    <p-button icon="fa-solid fa-rotate" [raised]="true" severity="warning" pTooltip="Cambiar"
                        tooltipPosition="bottom" (onClick)="onOpenEstado(item)"></p-button>
                </div>
            </td>
            <td>{{item.FechaRegistro | date: 'dd-MM-yyyy hh:mm'}}</td>
            <td>{{item.Usuario}}</td>
            <td>{{item.Maquina}}</td>
            <td>{{item.CodigoMaterial}}-{{item.DescripcionMaterial}}</td>
            <td class="text-right">{{item.Ancho | number: '0.0-2'}}</td>
            <td class="text-right">{{item.ValorMetrosCalibracion | number: '0.0-2'}}</td>
            <td class="text-right">{{item.MetroLineal | number: '0.0-2'}}</td>
            <td class="text-right">{{item.M2 | number: '0.2-2'}}</td>
            <td class="text-right">{{item.CantidadProduccion | number: '0.0-2'}}</td>
            <td class="text-center">
                <p-tag *ngIf="item.Estado === 0" value="Pendiente" severity="secondary"></p-tag>
                <p-tag *ngIf="item.Estado === 1" value="Correcto" severity="success"></p-tag>
                <p-tag *ngIf="item.Estado === 2" value="Incorrecto" severity="danger"></p-tag>
            </td>
        </tr>
    </ng-template>
</p-table>
<!--MODAL VALORES -->
<p-dialog [(visible)]="modalValores" [modal]="true" [style]="{ width: '30rem' }" [header]="'Valores Generados'"
    [maximizable]="true">
    <form class="flex flex-column mt-2 gap-3" [formGroup]="myFormValores" (ngSubmit)="onEditValores()">
        <div class="flex align-items-center gap-3">
            <label for="maquina" class="font-semibold w-10rem">Materia prima</label>
            <div class="flex-auto">
                <p-dropdown formControlName="materiaPrima" id="materiaPrima"
                    [options]="cierreService.listMPLiberadoTipInv" placeholder="Escoja una opcion" styleClass="w-full"
                    [showClear]="true" [filter]="true" [filterFields]="['CodigoInterno', 'NombreTipoInventario']">
                    <ng-template let-item pTemplate="selectedItem">
                        <div class="custom-dropdown-item-selected">
                            <div> {{ item.CodigoInterno }}</div>
                            <div> {{ item.NombreTipoInventario }}</div>
                        </div>
                    </ng-template>
                    <ng-template let-item pTemplate="item">
                        <div class="custom-dropdown-item">
                            <div> {{ item.CodigoInterno }}</div>
                            <div> {{ item.NombreTipoInventario }}</div>
                        </div>
                    </ng-template>
                </p-dropdown>
            </div>
        </div>
        <div class="flex align-items-center gap-3">
            <label for="cilindro" class="font-semibold w-10rem">Ancho Utilizado (mm)</label>
            <p-inputNumber formControlName="anchoMP" [minFractionDigits]="0" locale="en-US" [min]="0" />
        </div>
        <div class="flex align-items-center gap-3">
            <label for="cilindro" class="font-semibold w-10rem">Calibración (m)</label>
            <p-inputNumber formControlName="calibracion" [minFractionDigits]="0" locale="en-US" [min]="0" />
        </div>
        <div class="flex align-items-center gap-3">
            <label for="cilindro" class="font-semibold w-10rem">Metros producidos (m)</label>
            <p-inputNumber formControlName="metrosMP" [minFractionDigits]="0" locale="en-US" [min]="0" />
        </div>
        <div class="flex align-items-center gap-3">
            <label for="cilindro" class="font-semibold w-10rem">Cantidad producida</label>
            <p-inputNumber formControlName="cantProducida" [minFractionDigits]="0" locale="en-US" [min]="0" />
        </div>
        <div class="flex justify-content-center">
            <p-button type="submit" icon="fa-solid fa-floppy-disk" label="Guardar" severity="success"></p-button>
        </div>
    </form>
</p-dialog>
<!--MODAL ESTADO -->
<p-dialog [(visible)]="modalEstado" [modal]="true" [style]="{ width: '20rem' }" [header]="'Valores Generados'"
    [maximizable]="true">
    <form class="flex flex-column mt-2 gap-3" [formGroup]="myFormEstado" (ngSubmit)="onEditEstado()">
        <div class="flex align-items-center gap-3">
            <label for="" class=" font-semibold w-11rem">Estado</label>
            <div class="flex flex-wrap gap-3 align-items-center">
                <div class=" flex align-items-center">
                    <p-radioButton [value]="1" inputId="radiobtn1" formControlName="estado" />
                    <label for="radiobtn1" class="ml-2">Correcto</label>
                </div>
                <div class="flex align-items-center">
                    <p-radioButton [value]="2" inputId="radiobtn2" formControlName="estado" />
                    <label for="radiobtn2" class="ml-2">Incorrecto</label>
                </div>
            </div>
        </div>
        <div class="flex justify-content-center">
            <p-button type="submit" icon="fa-solid fa-floppy-disk" label="Guardar" severity="success"></p-button>
        </div>
    </form>
</p-dialog>